# /etc/nginx/nginx.conf

# Defines the user and group credentials used by worker processes.
# Common values are 'nginx' or 'www-data' depending on the distribution.
user www-data;

# Defines the number of worker processes. 'auto' usually sets it to the number of CPU cores.
worker_processes auto;

# Specifies the file that will store the process ID of the main process.
pid /var/run/nginx.pid;

# Includes files ending with .conf located in /etc/nginx/modules-enabled directory.
# This is common on Debian/Ubuntu for loading dynamic modules. Omit if not needed/present.
# include /etc/nginx/modules-enabled/*.conf;

# Provides the configuration file context in which the directives that affect connection processing are specified.
events {
    # Sets the maximum number of simultaneous connections that can be opened by a worker process.
    worker_connections 768;
    # multi_accept on; # Try to accept as many connections as possible after worker receives a new connection notification. Uncomment if needed.
}

# Directives that define the behavior for handling HTTP requests.
http {

    ##
    # Basic Settings
    ##

    # Instructs Nginx to use sendfile() for direct copying data between file descriptors. Improves performance.
    sendfile on;
    # Allows or prevents the use of TCP_CORK socket option (on Linux). Used with sendfile on.
    tcp_nopush on;
    # Allows or prevents the use of the TCP_NODELAY option. Usually keep off unless specific latency needs.
    tcp_nodelay off;
    # Sets the timeout during which a keep-alive client connection will stay open on the server side.
    keepalive_timeout 65;
    # Enables or disables the use of the types_hash_max_size and types_hash_bucket_size directives.
    types_hash_max_size 2048;
    # server_tokens off; # Uncomment to hide Nginx version number in error pages and Server header. Good security practice.

    # server_names_hash_bucket_size 64; # Uncomment/adjust if you have many server names.
    # server_name_in_redirect off;

    # Includes the mapping of file extensions to MIME types. Essential for correct Content-Type headers.
    include /etc/nginx/mime.types;
    # Sets the default MIME type of a response if Nginx cannot determine it from the file extension.
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    # Specifies the main log format.
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    # Sets the path, format, and configuration for a buffered log write.
    access_log /var/log/nginx/access.log main;
    # Configures logging level and file path for error messages.
    error_log /var/log/nginx/error.log warn;

    ##
    # Gzip Settings
    ##

    # Enables ("on") or disables ("off") gzipping of responses.
    gzip on;
    # gzip_disable "msie6"; # Uncomment to disable gzip for old IE versions.

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # Virtual Host Configs
    ##

    # Includes configuration files from the /etc/nginx/conf.d directory.
    # Often used for global settings or server blocks not managed by sites-enabled.
    include /etc/nginx/conf.d/*.conf;

    # Includes configuration files from the /etc/nginx/sites-enabled directory.
    # Standard practice on Debian/Ubuntu for enabling specific site configurations.
    include /etc/nginx/sites-enabled/*;

    ##
    # Default Server Block (Fallback)
    # This server block will handle requests that don't match any other server_name.
    # Often placed in /etc/nginx/sites-available/default and symlinked to sites-enabled.
    # If you have the includes above, you might put this block in a separate file
    # like /etc/nginx/sites-available/default and enable it.
    # For simplicity in this *single* file example, it's included here directly.
    ##
  

} # End of http block
